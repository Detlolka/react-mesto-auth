{"version":3,"sources":["images/logo/logo_header.svg","images/success_auth.svg","images/failed_auth.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithImage.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/InfoTooltip.js","utils/utils.js","components/Login.js","utils/apiAuth.js","components/Register.js","components/ProtectedRoute.js","utils/api.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","Header","userMail","onExit","history","useHistory","className","path","src","logo","alt","to","onClick","localStorage","removeItem","push","CurrentUserContext","React","createContext","Card","clickCard","card","deleteCard","onCardDelete","onCardLike","currentUser","useContext","isOwn","owner","_id","cardRemoveButtonClassName","isLiked","likes","some","cardLikeClassName","name","link","type","aria-label","length","Main","this","props","onEditAvatar","context","avatar","onEditProfile","about","onEditPlace","cards","map","i","onEditImage","onDeletePlace","key","Component","contextType","Footer","PopupWIthImage","onClose","PopupWithForm","title","buttonName","isOpen","children","onSubmit","method","action","noValidate","EditProfilePopup","onUpdateUser","useState","setName","setAbout","useEffect","evt","preventDefault","Fragment","value","id","placeholder","required","minLength","maxLength","pattern","onChange","target","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","ref","AddPlacePopup","onAddPlace","cardName","setCardName","cardLink","setCardLink","InfoTooltip","data","Success","Failed","authUrl","Login","handleLogin","onError","setError","registrationPopupOpen","email","setEmail","password","setPassword","console","error","fetch","headers","body","JSON","stringify","then","response","json","setItem","token","catch","authorization","message","err","log","Register","res","registration","ProtectedRoute","component","loggedIn","api","options","_baseUrl","baseUrl","_headers","ok","Promise","reject","status","_response","cardId","App","setLoggedIn","setUserMail","setOnError","checkToken","jwt","getItem","Authorization","getContents","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isDeletePlacePopupOpen","setDeletePlacePopupOpen","isRegisterPopupOpen","setRegisterPopupOpen","cardDate","setCardDate","cohort","setCurrentUser","closeAllPopups","setCards","all","getInitialCards","getUserInfo","cardItems","user","Provider","likeCardStatus","newCard","newCards","c","removeCard","filter","changeUserInfo","handleUpdateUser","changeAvatar","handleUpdateAvatar","createCard","PopupWithImage","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","unregister"],"mappings":"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","file":"static/js/main.d0972446.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo_header.855a8c98.svg\";","module.exports = __webpack_public_path__ + \"static/media/success_auth.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/failed_auth.4072126c.svg\";","import React from \"react\";\r\nimport logo from \"../images/logo/logo_header.svg\";\r\nimport { Route, useHistory, Link } from 'react-router-dom';\r\n\r\nfunction Header({ userMail, onExit }) {  \r\n  const history = useHistory();\r\n\r\n  const exit = () => {\r\n    onExit();\r\n    localStorage.removeItem(\"jwt\");\r\n    history.push(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <Route path=\"/signup\">\r\n        <img className=\"header__logo\" src={logo} alt=\"Логотип\" />\r\n        <Link className=\"header__link\" to=\"/signin\">\r\n          Войти\r\n        </Link>\r\n      </Route>\r\n      <Route path=\"/signin\">\r\n        <img className=\"header__logo\" src={logo} alt=\"Логотип\" />\r\n        <Link className=\"header__link\" to=\"/signup\">\r\n          Регистрация\r\n        </Link>\r\n      </Route>\r\n      <Route path=\"/main\">\r\n        <img className=\"header__logo\" src={logo} alt=\"Логотип\" />\r\n        <p className=\"header__user-mail\">{userMail}</p>\r\n        <Link className=\"header__link\" to=\"/signin\" onClick={exit}>\r\n          Выйти\r\n        </Link>\r\n      </Route>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react'\r\n\r\nconst CurrentUserContext = React.createContext();\r\n\r\nexport default CurrentUserContext","import React from \"react\";\r\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\r\n\r\nfunction Card({ clickCard, deleteCard, card, onCardDelete, onCardLike }) {\r\n     \r\n  const currentUser = React.useContext(CurrentUserContext);  \r\n \r\n\r\n  const isOwn = (card.owner._id === currentUser._id);\r\n  \r\n \r\n  const cardRemoveButtonClassName = `element__del ${isOwn ? 'element__del_active' : ''}`;\r\n\r\n  const isLiked = card.likes.some(card => card._id === currentUser._id);\r\n\r\n  const cardLikeClassName = `element__like ${isLiked ? 'element__like_active' : ''}`;\r\n  \r\n\r\n  const handleLikeClick = () => {\r\n    onCardLike(card)\r\n  }\r\n\r\n  const handleDeleteClick = () => {       \r\n    onCardDelete(card._id)       \r\n  } \r\n\r\n  return (\r\n    <div className=\"element\">\r\n      <img\r\n        className=\"element__image\"\r\n        alt={card.name}\r\n        src={card.link}\r\n        onClick={() => clickCard(card)}\r\n      />\r\n      <div className=\"element__about\">\r\n        <p className=\"element__title\">{card.name}</p>\r\n        <div className=\"element__like-container\">\r\n          <button\r\n            type=\"button\"\r\n            className={cardLikeClassName}\r\n            aria-label=\"Лайк\"\r\n            onClick={handleLikeClick}\r\n          />\r\n          <span className=\"element__like-counter\">{card.likes.length}</span>\r\n        </div>\r\n      </div>\r\n      <button\r\n        type=\"button\"\r\n        className={cardRemoveButtonClassName}\r\n        aria-label=\"Удалить\"        \r\n        onClick={handleDeleteClick}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import React from \"react\";\r\nimport Card from \"./Card\";\r\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\r\n\r\nclass Main extends React.Component {\r\n\r\n  static contextType = CurrentUserContext;  \r\n\r\n  render() {\r\n    return (\r\n      <main className=\"content\">\r\n        <section className=\"profile\">\r\n          <div className=\"profile__avatar\" onClick={this.props.onEditAvatar}>\r\n            <img\r\n              className=\"profile__image\"\r\n              src={this.context.avatar}\r\n              alt=\"Аватарка\"\r\n            />\r\n          </div>\r\n          <div className=\"profile__info\">\r\n            <div className=\"profile__container\">\r\n              <h1 className=\"profile__title\">{this.context.name}</h1>\r\n              <button\r\n                type=\"button\"\r\n                className=\"profile__editButton\"\r\n                onClick={this.props.onEditProfile}\r\n              ></button>\r\n            </div>\r\n            <h2 className=\"profile__subtitle\">{this.context.about}</h2>\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            className=\"profile__addButton\"\r\n            onClick={this.props.onEditPlace}\r\n          ></button>\r\n        </section>\r\n        <section className=\"elements\">\r\n          {this.props.cards.map((card, i) => {\r\n            return (\r\n              <Card\r\n                onCardLike={this.props.onCardLike}                \r\n                clickCard={this.props.onEditImage}\r\n                deleteCard={this.props.onDeletePlace}\r\n                onCardDelete={this.props.onCardDelete}\r\n                card={card}\r\n                key={i}\r\n              />\r\n            );\r\n          })}\r\n        </section>\r\n      </main>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Main;\r\n","import React from \"react\";\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__author\">&copy; 2020 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\n\r\nfunction PopupWIthImage({ card, onClose }) {\r\n  return (\r\n    <div className={\"popup popup_image \" + (card && \"popup_opened\")}>\r\n      {card && (\r\n        <div className=\"popup__image-container\">\r\n          <img className=\"popup__picture\" alt={card.name} src={card.link} />\r\n          <p className=\"popup__description\">{card.name}</p>\r\n          <button\r\n            type=\"button\"\r\n            className=\"popup__close\"\r\n            aria-label=\"Закрыть\"\r\n            onClick={onClose}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWIthImage;\r\n","import React from \"react\";\r\n\r\nfunction PopupWithForm({name, title, buttonName, isOpen, onClose, children, onSubmit}) {\r\n  return (\r\n    <div\r\n      className={\r\n        `popup popup_${name} ` + (isOpen && \"popup_opened\")\r\n      }\r\n    >\r\n      <div className=\"popup__container\">\r\n        <form\r\n          onSubmit={onSubmit}\r\n          className=\"popup__form\"\r\n          name={name}\r\n          method=\"GET\"\r\n          action=\"#\"\r\n          noValidate\r\n        >\r\n          <p className=\"popup__title\">{title}</p>\r\n          {children}\r\n          <button type=\"submit\" className=\"popup__save\">\r\n            {buttonName}\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className=\"popup__close\"\r\n            aria-label=\"Закрыть\"\r\n            onClick={onClose}\r\n          />\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditProfilePopup({ onClose, isOpen, onUpdateUser}) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = useState(\"\");\r\n  const [about, setAbout] = useState(\"\");\r\n\r\n  const hadneChangeName = (evt) => {\r\n    setName(evt.target.value);\r\n  };\r\n\r\n  const handleChangeAbout = (evt) => {\r\n    setAbout(evt.target.value);\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    onUpdateUser(name, about);\r\n    onClose();\r\n  };\r\n\r\n  useEffect(() => {\r\n    setName(currentUser.name);\r\n    setAbout(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile\"\r\n      title=\"Редактировать профиль\"\r\n      buttonName=\"Сохранить\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      children={\r\n        <React.Fragment>\r\n          <input\r\n            type=\"text\"\r\n            name=\"profileName\"\r\n            value={name}\r\n            className=\"popup__input popup__input_name\"\r\n            id=\"input-name\"\r\n            placeholder=\"Имя\"\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"40\"\r\n            pattern=\"[А-ЯЁа-яёA-Za-z-\\s]*\"\r\n            onChange={hadneChangeName}\r\n          />\r\n          <span className=\"error\" id=\"input-name-error\" />\r\n\r\n          <input\r\n            type=\"text\"\r\n            name=\"profileAbout\"\r\n            value={about}\r\n            className=\"popup__input popup__input_about\"\r\n            id=\"input-about\"\r\n            placeholder=\"О себе\"\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"200\"\r\n            onChange={handleChangeAbout}\r\n          />\r\n          <span className=\"error\" id=\"input-about-error\" />\r\n        </React.Fragment>\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({onClose, isOpen, onUpdateAvatar}) {\r\n\r\n    const avatarRef = React.useRef();\r\n\r\n    const handleSubmit = (evt) => {\r\n        evt.preventDefault();\r\n        onUpdateAvatar({\r\n            avatar: avatarRef.current.value\r\n        });\r\n        onClose();\r\n        \r\n    }\r\n\r\n    React.useEffect(() => {\r\n      if(isOpen) {\r\n        avatarRef.current.value = '';\r\n      }\r\n    }, [isOpen])\r\n\r\n    return (\r\n        <PopupWithForm\r\n        onSubmit={handleSubmit}\r\n        name=\"avatar\"\r\n        title=\"Обновить аватар\"\r\n        buttonName=\"Сохранить\"\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        children={\r\n          <React.Fragment>\r\n            <input\r\n              type=\"url\"\r\n              name=\"avatarPhoto\"              \r\n              className=\"popup__input popup__input_avatar\"\r\n              id=\"input-avatar\"\r\n              placeholder=\"Введите URL\"\r\n              ref={avatarRef}\r\n              value={avatarRef.value}\r\n              required\r\n            />\r\n            <span className=\"error\" id=\"input-avatar-error\" />\r\n          </React.Fragment>\r\n        }\r\n      />\r\n\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from \"react\";\r\nimport { useState } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace }) {\r\n  const [cardName, setCardName] = useState(\"\");\r\n  const [cardLink, setCardLink] = useState(\"\");\r\n\r\n  const handleCardName = (evt) => {\r\n    setCardName(evt.target.value);\r\n  };\r\n\r\n  const handleCardLink = (evt) => {\r\n    setCardLink(evt.target.value);\r\n  };\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    onAddPlace(cardName, cardLink);\r\n    onClose();    \r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if(isOpen) {\r\n      setCardName(\"\");\r\n      setCardLink(\"\");\r\n    }\r\n  }, [isOpen])\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"card\"\r\n      title=\"Новое место\"\r\n      buttonName=\"Создать\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      children={\r\n        <React.Fragment>\r\n          <input\r\n            type=\"text\"\r\n            name=\"placeName\"            \r\n            className=\"popup__input popup__input_place\"\r\n            id=\"input-place\"\r\n            placeholder=\"Название\"\r\n            required\r\n            minLength=\"1\"\r\n            maxLength=\"30\"\r\n            value={cardName}\r\n            onChange={handleCardName}\r\n            pattern=\"[А-ЯЁа-яёA-Za-z-\\s]*\"\r\n          />\r\n          <span className=\"error\" id=\"input-place-error\" />\r\n\r\n          <input\r\n            type=\"url\"\r\n            name=\"placePhoto\"            \r\n            className=\"popup__input popup__input_image\"\r\n            id=\"input-url\"\r\n            placeholder=\"Ссылка на картинку\"\r\n            onChange={handleCardLink}\r\n            value={cardLink}\r\n            required\r\n          />\r\n          <span className=\"error\" id=\"input-url-error\" />\r\n        </React.Fragment>\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\nimport Success from '../images/success_auth.svg';\r\nimport Failed from '../images/failed_auth.svg';\r\n\r\nconst InfoTooltip = ({ isOpen, onClose }) => {  \r\n  return (\r\n    <div className={`popup popup_tooltip ${isOpen ? 'popup_opened' : ''}`}>\r\n      <div className='popup__container popup__container_tooltip'>\r\n        <img\r\n          alt='иконка результата'\r\n          className='popup__picture'\r\n          src={isOpen.data ? Success : Failed}          \r\n        />\r\n        <h2 className='popup__title popup__title_tooltip'>\r\n          {isOpen.data ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}\r\n        </h2>\r\n        <button\r\n          type='button'\r\n          className='popup__close'\r\n          onClick={onClose}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InfoTooltip;\r\n","\r\nexport const  configApi = {\r\n    baseUrl: \"https://detlolka-m.students.nomoreparties.space/\",\r\n    headers: {        \r\n        \"Content-Type\": \"application/json\",\r\n    }\r\n  };\r\n\r\n  export const authUrl = 'https://detlolka-m.students.nomoreparties.space/';\r\n  \r\n","import React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useHistory, Link } from \"react-router-dom\";\r\nimport { authorization } from \"../utils/apiAuth\";\r\n\r\nfunction Login({ handleLogin, onError, setError, registrationPopupOpen }) {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const history = useHistory();\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    if (!email || !password) {\r\n      console.error(\"Заполните все поля\");\r\n    }\r\n\r\n    const clearForm = () => {\r\n      setEmail(\"\");\r\n      setPassword(\"\");\r\n    };\r\n\r\n    authorization(email, password)\r\n      .then((data) => {\r\n        if (data.token) {\r\n          clearForm();\r\n          handleLogin();\r\n          setError(\"\");\r\n          history.push(\"/main\");\r\n        } else if (data.message) {\r\n          setError(data.message);\r\n          registrationPopupOpen(true)\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth\">\r\n      <h2 className=\"auth__title\">Вход</h2>\r\n      <form className=\"auth__form\" onSubmit={handleSubmit}>\r\n        <input\r\n          className=\"auth__input\"\r\n          type=\"email\"\r\n          required={true}\r\n          placeholder=\"Email\"\r\n          onChange={(evt) => setEmail(evt.target.value)}\r\n        />\r\n        <div className=\"auth__input-box\">\r\n          <input\r\n            className=\"auth__input\"\r\n            type=\"password\"\r\n            placeholder=\"Пароль\"\r\n            onChange={(evt) => setPassword(evt.target.value)}\r\n          />\r\n          <p className=\"auth__error\">{onError}</p>\r\n        </div>\r\n        <button type=\"submit\" className=\"auth__submit-button\">\r\n          Войти\r\n        </button>\r\n        <Link className=\"auth__link\" to=\"/signup\">\r\n          Ещё не зарегистрированы? Регистрация\r\n        </Link>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import { authUrl } from \"./utils.js\";\r\n\r\nexport const authorization = (email, password) => {\r\n  return fetch(`${authUrl}/signin`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ email, password }),\r\n  })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      localStorage.setItem(\"jwt\", data.token);\r\n      return data;\r\n    })\r\n    .catch((error) => {\r\n      console.error(error);\r\n    });\r\n};\r\n\r\nexport const registration = (email, password) => {\r\n    return fetch(`${authUrl}/signup`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ email, password }),\r\n    })\r\n        .then((res) => {\r\n            return res.json();\r\n        })\r\n        .then((res) => {\r\n            return res;\r\n        })\r\n        .catch((error) => {\r\n            console.error(error);\r\n        });\r\n}\r\n\r\nexport const getContents = (jwt) => {\r\n    return fetch(`${authUrl}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Authorization: `Bearer ${jwt}`,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((data) => data)\r\n      .catch((error) => {\r\n        console.error(error);\r\n      });\r\n  };\r\n","import React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useHistory, Link } from \"react-router-dom\";\r\nimport { registration } from \"../utils/apiAuth.js\";\r\n\r\nconst Register = ({ registrationPopupOpen, setError }) => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const history = useHistory();\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    registration(email, password)\r\n      .then((res) => {        \r\n        if (res.data) {\r\n          registrationPopupOpen(res);\r\n          setError(\"\");\r\n          history.push(\"/signin\");\r\n        } else {\r\n          registrationPopupOpen(res);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth\">\r\n      <h2 className=\"auth__title\">Регистрация</h2>\r\n      <form className=\"auth__form\" onSubmit={handleSubmit}>\r\n        <input\r\n          className=\"auth__input\"\r\n          type=\"email\"\r\n          placeholder=\"Электронная почта\"\r\n          required={true}\r\n          onChange={(evt) => setEmail(evt.target.value)}\r\n        />\r\n        <input\r\n          className=\"auth__input\"\r\n          type=\"password\"\r\n          placeholder=\"Пароль\"\r\n          required={true}\r\n          onChange={(evt) => setPassword(evt.target.value)}\r\n        />\r\n        <button type=\"submit\" className=\"auth__submit-button\">\r\n          Зарегистрироваться\r\n        </button>\r\n        <Link className=\"auth__link\" to=\"/signin\">\r\n          Уже зарегистрированы? Войти\r\n        </Link>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route>\r\n      {() => (props.loggedIn  ? <Component {...props} /> : <Redirect to='./signin' />)}\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;","import { configApi } from './utils.js';\r\n\r\n\r\n class Api {\r\n  constructor(options) {\r\n      this._baseUrl = options.baseUrl;\r\n      this._headers = options.headers;        \r\n  }\r\n  \r\n  _response(res) {\r\n      if (res.ok) {          \r\n          return res.json()\r\n      }\r\n      return Promise.reject(`Что то пошло не так: ${res.status}`)      \r\n  }\r\n\r\n //GET-запрос карточек\r\n  getInitialCards() {                       \r\n    return fetch(`${this._baseUrl}/cards`, { headers: this._headers})\r\n    .then(this._response)    \r\n}\r\n\r\n// POST-запрос на добавление карточки\r\n  createCard (name, link) {  \r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name,\r\n        link\r\n      })      \r\n    })\r\n    .then(this._response)\r\n  }\r\n\r\n// DELETE - запрос на удаление карточки\r\n  removeCard(cardId) { \r\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers\r\n    })\r\n    .then(this._response);\r\n  }\r\n\r\n// PUT и DELETE запросы на лайк\r\n  likeCardStatus(cardId, isLiked) {\r\n    if(isLiked) {  \r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: 'PUT',\r\n      headers: this._headers\r\n    })\r\n    .then(this._response);\r\n   }\r\n   return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: this._headers\r\n  })\r\n  .then(this._response);\r\n  }\r\n\r\n\r\n// GET-запрос на получение данных пользователя\r\n  getUserInfo() {     \r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      headers: this._headers  \r\n    })\r\n    .then(this._response)    \r\n  }\r\n\r\n// PATCH-запрос на обновление даннных пользователя с сервера\r\n  changeUserInfo(name, about) {  \r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n        method: 'PATCH',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n            name,\r\n            about\r\n        })        \r\n    })\r\n    .then(this._response)   \r\n }\r\n \r\n// PATCH - запрос на обновление аватарки\r\n  changeAvatar(avatar) {  \r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar\r\n      })\r\n    })\r\n    .then(this._response);\r\n  }\r\n}\r\n\r\nconst api = new Api(configApi);\r\n\r\nexport default api;\r\n\r\n\r\n\r\n\r\n\r\n\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React from \"react\";\r\nimport { useState, useEffect } from 'react';\r\nimport { Route, Switch, useHistory, Redirect } from \"react-router-dom\";\r\nimport \"../index.css\";\r\nimport Header from \"./Header\";\r\nimport Main from \"./Main\";\r\nimport Footer from \"./Footer\";\r\nimport PopupWithImage from \"./PopupWithImage\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport InfoTooltip from \"./InfoTooltip\";\r\nimport Login from \"./Login\";\r\nimport Register from \"./Register\";\r\nimport ProtectedRoute from \"./ProtectedRoute\";\r\nimport api from \"../utils/api\";\r\nimport { getContents } from \"../utils/apiAuth\";\r\n\r\nfunction App() {\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [userMail, setUserMail] = useState('');\r\n  const [onError, setOnError] = useState('');\r\n\r\n  const history = useHistory(); \r\n  \r\n  const checkToken = () => {\r\n    const jwt = localStorage.getItem('jwt');\r\n    if (jwt) {\r\n      getContents(jwt)\r\n        .then((res) => {\r\n          if (res) {\r\n            setLoggedIn(true);            \r\n            setUserMail(res.data.email);            \r\n            history.push('/main');\r\n          } else {\r\n            localStorage.removeItem('jwt');\r\n            setLoggedIn(false);\r\n            setUserMail('');\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(error);\r\n        });\r\n    }\r\n  };\r\n\r\n  function handleLogin () {\r\n    setLoggedIn(true);\r\n  }\r\n\r\n  function handleLogout() {\r\n    setLoggedIn(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    checkToken();\r\n  }, [loggedIn]);\r\n\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\r\n  const [isDeletePlacePopupOpen, setDeletePlacePopupOpen] = useState(false);\r\n  const [isRegisterPopupOpen, setRegisterPopupOpen] = useState(false);  \r\n  const [cardDate, setCardDate] = useState(null);\r\n\r\n  const [currentUser, setCurrentUser] = useState({    \r\n    name: '',\r\n    about: '',\r\n    avatar: '',\r\n    _id: '',\r\n    cohort: '',\r\n  });\r\n  \r\n  function handleEditProfileClick () {    \r\n      setEditProfilePopupOpen(true);  \r\n  }\r\n\r\n  function handleEditPlaceClick () {    \r\n      setAddPlacePopupOpen(true);    \r\n  }\r\n\r\n  function handleEditAvatarClick () {\r\n      setEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditDeleteClick () {\r\n      setDeletePlacePopupOpen(true);\r\n  }\r\n\r\n  function handleEditImageClick (card) {\r\n    setCardDate ({\r\n      name: card.name,\r\n      link: card.link,\r\n    });\r\n  }  \r\n\r\n  function closeAllPopups () {    \r\n      setEditProfilePopupOpen(false);\r\n      setAddPlacePopupOpen(false);\r\n      setEditAvatarPopupOpen(false);\r\n      setCardDate(null)\r\n      setDeletePlacePopupOpen(false);\r\n      setRegisterPopupOpen(false);    \r\n  }\r\n\r\n  //смена данных пользователя\r\n  function handleUpdateUser (name, about) {\r\n    api\r\n      .changeUserInfo(name, about)\r\n      .then((user) => {       \r\n          setCurrentUser(user);        \r\n      })\r\n      .catch((err) => console.error(err));\r\n  };\r\n\r\n  //Смена аватара пользователя\r\n  function handleUpdateAvatar (avatar) {\r\n    api\r\n      .changeAvatar(avatar)\r\n      .then((user) => {\r\n        setCurrentUser(user);\r\n     })\r\n      .catch((err) => console.error(err));\r\n  };\r\n\r\n  \r\n  const [cards, setCards] = useState([]);\r\n\r\n//Удаление карточки\r\n   \r\n\r\n  function handleCardDelete (cardId) {         \r\n    api\r\n      .removeCard(cardId)\r\n      .then((res) => {\r\n        const newCards = cards.filter((c) => c._id !== cardId);\r\n        setCards(newCards)\r\n      })\r\n      .catch((err) => console.error(err));\r\n  };\r\n\r\n  //Постановка лайка и удаление лайка\r\n  function changeCardLike (card) {\r\n    const isLiked = card.likes.some(\r\n      (i) => i._id === currentUser._id\r\n    );\r\n    api\r\n      .likeCardStatus(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        const newCards = cards.map((c) =>\r\n          c._id === card._id ? newCard : c\r\n        );\r\n        setCards(newCards);\r\n      })\r\n      .catch((err) => console.error(err));\r\n  };\r\n\r\n  //Добавление новой карточки\r\n  function handleAddPlace (name, link) {    \r\n    api\r\n      .createCard(name, link)\r\n      .then((newCard) => {        \r\n          setCards([newCard, ...cards])        \r\n      })\r\n      .catch((err) => console.error(err));\r\n  };\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    Promise.all([api.getInitialCards(), api.getUserInfo()])\r\n      .then(([cardItems, user]) => {        \r\n          setCurrentUser(user)\r\n          setCards(cardItems);         \r\n        }\r\n      )\r\n      .catch((err) => console.error(err));\r\n \r\n      }, []);\r\n  \r\n    return (\r\n      <CurrentUserContext.Provider value={currentUser}>\r\n        <div className=\"page\">\r\n          <Header userMail={userMail} onExit={handleLogout} />\r\n          <Switch>\r\n          <ProtectedRoute path=\"/main\"\r\n            component={Main}\r\n            loggedIn={loggedIn}          \r\n            onEditProfile={handleEditProfileClick}\r\n            onEditPlace={handleEditPlaceClick}\r\n            onEditImage={handleEditImageClick}\r\n            onDeletePlace={handleEditDeleteClick}\r\n            onEditAvatar={handleEditAvatarClick}\r\n            cards={cards}\r\n            onCardLike={changeCardLike}\r\n            onCardDelete={handleCardDelete}\r\n          />\r\n          <Route path='/signup'>\r\n              <Register\r\n                registrationPopupOpen={setRegisterPopupOpen}\r\n                isOpen={isRegisterPopupOpen}\r\n                setError={setOnError}\r\n              />\r\n            </Route>\r\n            <Route path='/signin'>\r\n              <Login handleLogin={handleLogin} onError={onError} setError={setOnError} registrationPopupOpen={setRegisterPopupOpen} />\r\n            </Route>\r\n            <Route>{loggedIn ? <Redirect to='/main' /> : <Redirect to='/signin' />}</Route>\r\n          </Switch>\r\n          <Footer />\r\n          <InfoTooltip isOpen={isRegisterPopupOpen} onClose={closeAllPopups} />\r\n          <PopupWithForm\r\n            name=\"delete-place\"\r\n            title=\"Вы уверены?\"\r\n            buttonName=\"Да\"\r\n            isOpen={isDeletePlacePopupOpen}\r\n            onClose={closeAllPopups}\r\n          />\r\n          <EditProfilePopup\r\n            isOpen={isEditProfilePopupOpen}\r\n            onClose={closeAllPopups}\r\n            onUpdateUser={(name, about) => handleUpdateUser(name, about)}\r\n          />\r\n\r\n          <EditAvatarPopup\r\n            isOpen={isEditAvatarPopupOpen}\r\n            onClose={closeAllPopups}\r\n            onUpdateAvatar={({ avatar }) => handleUpdateAvatar(avatar)}\r\n          />\r\n\r\n          <AddPlacePopup            \r\n            isOpen={isAddPlacePopupOpen}\r\n            onClose={closeAllPopups}\r\n            onAddPlace={handleAddPlace}\r\n          />\r\n\r\n          <PopupWithImage\r\n            card={cardDate}\r\n            onClose={closeAllPopups}\r\n          />\r\n        </div>\r\n      </CurrentUserContext.Provider>\r\n    );\r\n  \r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n    <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}